<div class="booking-page">
  <div class="hero-section">
 
  </div>

  <div class="booking-container">
    <div class="booking-info">
      <h2>Informations de r√©servation</h2>
      <p>Remplissez le formulaire ci-dessous pour nous faire part de votre demande de r√©servation. Notre √©quipe vous contactera dans les plus brefs d√©lais pour confirmer votre s√©jour.</p>
      
      <div class="hotel-details">
        <h3>H√¥tel Tanfous Beach & Aquapark</h3>
        <p>üìç Avenue de la Paix, Hammamet Sud, Tunisie</p>
        <p>‚≠ê 3 √©toiles</p>
        <p>üèä‚Äç‚ôÇÔ∏è Aquapark avec 7 toboggans</p>
        <p>üèñÔ∏è Plage priv√©e</p>
      </div>

      <div class="selected-service" *ngIf="selectedService" style="margin-top:1rem; padding:0.75rem; background:#f3f7ff; border-left:4px solid #3b82f6; border-radius:4px;">
        <strong>Service bien-√™tre s√©lectionn√©:</strong> {{ selectedService }}
      </div>
    
    </div>

    <div class="booking-form-container">
<form (ngSubmit)="onSubmit()" #bookingFormElement="ngForm" class="booking-form">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">Pr√©nom *</label>
            <input 
              type="text" 
              id="firstName" 
              name="firstName"
              [(ngModel)]="bookingForm.firstName" 
              required>
          </div>
          <div class="form-group">
            <label for="lastName">Nom *</label>
            <input 
              type="text" 
              id="lastName" 
              name="lastName"
              [(ngModel)]="bookingForm.lastName" 
              required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">Adresse e-mail *</label>
            <input 
              type="email" 
              id="email" 
              name="email"
              [(ngModel)]="bookingForm.email" 
              required>
          </div>
          <div class="form-group">
            <label for="phone">T√©l√©phone *</label>
            <input 
              type="tel" 
              id="phone" 
              name="phone"
              [(ngModel)]="bookingForm.phone" 
              required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="roomType">Type de chambre *</label>
            <select 
              id="roomType" 
              name="roomType"
              [(ngModel)]="bookingForm.roomType" 
              required>
              <option *ngFor="let type of roomTypes" [value]="type.value">
                {{ type.label }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="guestsAdults">Adultes *</label>
            <input 
              type="number" 
              id="guestsAdults" 
              name="guestsAdults"
              [(ngModel)]="bookingForm.guestsAdults" 
              min="1" 
              max="6" 
              required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="guestsChildren">Enfants</label>
            <input 
              type="number" 
              id="guestsChildren" 
              name="guestsChildren"
              [(ngModel)]="bookingForm.guestsChildren" 
              min="0" 
              max="4">
          </div>
          <div class="form-group">
            <!-- Empty for layout -->
          </div>
        </div>

        <!-- Chambres suppl√©mentaires (multi-chambre) -->
        <div class="form-row" style="align-items: flex-end;">
          <div class="form-group">
            <label for="extraRoomType">Ajouter une autre chambre</label>
            <select 
              id="extraRoomType" 
              name="extraRoomType"
              [(ngModel)]="newRoom.roomType">
              <option value="">-- S√©lectionner le type --</option>
              <option *ngFor="let type of roomTypes" [value]="type.value">{{ type.label }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="extraRoomQty">Quantit√©</label>
            <input 
              type="number" 
              id="extraRoomQty" 
              name="extraRoomQty"
              [(ngModel)]="newRoom.quantity"
              min="1"
              max="10">
          </div>
          <div class="form-group">
            <button type="button" class="submit-btn" (click)="addAdditionalRoom()">Ajouter</button>
          </div>
        </div>

        <div *ngIf="additionalRooms.length" style="margin-bottom: 1rem;">
          <h4>Chambres ajout√©es</h4>
          <ul style="list-style: none; padding: 0;">
            <li *ngFor="let r of additionalRooms; let i = index" style="display: flex; align-items: center; gap: 10px; margin: 6px 0;">
              <span>{{ r.quantity }} √ó {{ getRoomTypeLabel(r.roomType) }}</span>
              <button type="button" class="submit-btn" style="background:#ef4444;" (click)="removeAdditionalRoom(i)">Retirer</button>
            </li>
          </ul>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="checkIn">Date d'arriv√©e *</label>
            <input 
              type="date" 
              id="checkIn" 
              name="checkIn"
              [(ngModel)]="bookingForm.checkIn" 
              [min]="getMinDate()"
              (change)="onCheckInChange()"
              required>
          </div>
          <div class="form-group">
            <label for="checkOut">Date de d√©part *</label>
            <input 
              type="date" 
              id="checkOut" 
              name="checkOut"
              [(ngModel)]="bookingForm.checkOut" 
              [min]="getMinCheckOutDate()"
              required>
          </div>
        </div>
        <!-- S√©lection du service bien-√™tre -->
        <div class="form-row">
          <div class="form-group">
            <label for="wellnessService">Service bien-√™tre</label>
            <select 
              id="wellnessService" 
              name="wellnessService"
              [(ngModel)]="bookingForm.wellnessService">
              <option value="">-- Aucun --</option>
              <option *ngFor="let opt of wellnessOptions" [value]="opt">{{ opt }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="wellnessTime">Heure souhait√©e</label>
            <input 
              type="time" 
              id="wellnessTime" 
              name="wellnessTime"
              [(ngModel)]="bookingForm.wellnessTime">
          </div>
        </div>

        <div class="form-group">
          <label for="message">Message (optionnel)</label>
          <textarea 
            id="message" 
            name="message"
            [(ngModel)]="bookingForm.message" 
            rows="4"
            placeholder="Demandes particuli√®res, pr√©f√©rences alimentaires, etc."></textarea>
        </div>

        <div class="error-message" *ngIf="submitError" style="color: red; margin-bottom: 1em;">
          {{ submitError }}
        </div>
        
        <button type="submit" class="submit-btn" [disabled]="isSubmitting">
          <span *ngIf="!isSubmitting">Envoyer la demande</span>
          <span *ngIf="isSubmitting">Envoi en cours...</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Message de confirmation -->
  <div class="confirmation-message" *ngIf="isSubmitted">
    <div class="confirmation-content">
      <h3>‚úÖ Demande envoy√©e avec succ√®s !</h3>
      <p>Votre demande de r√©servation a bien √©t√© envoy√©e et est en attente d'approbation par notre √©quipe.</p>
      
      <div class="booking-details" *ngIf="bookingConfirmation">
        <h4>D√©tails de votre demande :</h4>
        <p><strong>Num√©ro de r√©servation :</strong> {{ bookingConfirmation.bookingId }}</p>
        <p><strong>Type de chambre :</strong> {{ bookingConfirmation.Room?.title }}</p>
        <p><strong>Dates :</strong> {{ bookingConfirmation.checkIn | date:'dd/MM/yyyy' }} - {{ bookingConfirmation.checkOut | date:'dd/MM/yyyy' }}</p>
        <p><strong>Montant total :</strong> {{ bookingConfirmation.totalAmount }} TND</p>
        <p><strong>Statut :</strong> <span class="status-pending">{{ bookingConfirmation.status }}</span></p>
      </div>
      
      <p>Vous recevrez un email de confirmation une fois votre r√©servation approuv√©e.</p>
      <p><strong>Conservez votre num√©ro de r√©servation pour suivre votre demande.</strong></p>
      <p>Merci de votre confiance !</p>
    </div>
  </div>
</div> 